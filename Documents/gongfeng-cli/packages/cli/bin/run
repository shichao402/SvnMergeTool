#!/usr/bin/env node
const Sentry = require('@sentry/node');
const oclif = require('@oclif/core');

oclif
  .run()
  .then(require('@oclif/core/flush'))
  .catch(async (error) => {
    const oclifHandler = require('@oclif/core/handle');
    Sentry.captureException(error); // 捕获的是error对象
    await Sentry.flush(); // 等待所有事件执行完
    return oclifHandler(error);
  });
