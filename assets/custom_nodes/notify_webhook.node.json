{
  "typeId": "notify_webhook",
  "name": "Webhook 通知",
  "description": "发送 HTTP 通知到指定的 Webhook URL",
  "icon": "http",
  "color": "purple",
  "category": "通知",
  "inputs": [
    {
      "id": "in",
      "name": "输入",
      "description": "接收上游数据"
    }
  ],
  "outputs": [
    {
      "id": "success",
      "name": "成功",
      "description": "通知发送成功"
    },
    {
      "id": "failure",
      "name": "失败",
      "description": "通知发送失败"
    }
  ],
  "params": [
    {
      "key": "webhookUrl",
      "name": "Webhook URL",
      "type": "string",
      "required": true,
      "description": "接收通知的 Webhook URL"
    },
    {
      "key": "message",
      "name": "消息内容",
      "type": "string",
      "defaultValue": "任务 ${job.jobId} 已完成",
      "description": "通知消息内容，支持变量替换"
    },
    {
      "key": "timeout",
      "name": "超时(秒)",
      "type": "int",
      "defaultValue": 30,
      "description": "HTTP 请求超时时间"
    }
  ],
  "executor": {
    "type": "http",
    "url": "${config.webhookUrl}",
    "method": "POST",
    "headers": {
      "Content-Type": "application/json"
    },
    "body": {
      "text": "${config.message}",
      "jobId": "${job.jobId}",
      "sourceUrl": "${job.sourceUrl}",
      "revision": "${job.currentRevision}"
    },
    "timeout": "${config.timeout}",
    "portMapping": {
      "statusCode": {
        "200-299": "success",
        "*": "failure"
      }
    }
  }
}
