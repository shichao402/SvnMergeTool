---
alwaysApply: true
---
# Dart语言特定规则

## 代码规范

### 禁止行为

- ❌ 禁止使用 `print()` 语句（必须使用统一日志服务）
- ❌ 禁止使用 `debugPrint()` 语句
- ❌ 禁止使用 `print()` 进行调试

### 必须遵守

- ✅ 必须使用统一日志服务（`.cursor/rules/01-logging.mdc`）
- ✅ 错误处理必须包含堆栈跟踪
- ✅ 异步操作必须正确处理错误

## 错误处理

### 标准错误处理模式

```dart
try {
  // 代码逻辑
} catch (e, stackTrace) {
  logger.logError('操作失败', error: e, stackTrace: stackTrace);
  // 错误处理
}
```

### Future错误处理

```dart
future.catchError((error, stackTrace) {
  logger.logError('异步操作失败', error: error, stackTrace: stackTrace);
});
```

## 空安全

- ✅ 必须使用空安全特性
- ✅ 使用 `?` 和 `!` 操作符时要注意空值检查
- ✅ 使用 `??` 提供默认值

## 类型系统

- ✅ 明确指定类型，避免使用 `var`（除非类型明显）
- ✅ 使用 `final` 和 `const` 提高性能
- ✅ 使用类型推断时确保类型明确
